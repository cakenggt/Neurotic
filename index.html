<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="neurotic.js" charset="utf-8"></script>
    <script src="example functions.js" charset="utf-8"></script>
    <script type="text/javascript">
      var n = new Neurotic(8,[8],8);
      var cont = true;
      var count = 0;
      var error = Infinity;
      function anim(){
        document.getElementById('start').disabled = true;
        document.getElementById('stop').disabled = false;
        //checking which radio button is clicked
        var testFunction;
        var radios = document.getElementsByName('test');
        for (var i = 0, length = radios.length; i < length; i++) {
            if (radios[i].checked) {
                // do whatever you want with the checked radio
                switch(radios[i].value){
                  case 'sine':
                    testFunction = sine;
                    break;
                  case 'sum':
                    testFunction = sum;
                    break;
                  case 'difference':
                    testFunction = difference;
                    break;
                  case 'iris':
                    testFunction = iris;
                    break;
                  case 'xor':
                    testFunction = xor;
                    break;
                  case 'fish':
                    testFunction = fish;
                    break;
                  case 'wine':
                    testFunction = wine;
                    break;
                  case 'custom':
                    testFunction = new Function('result', 'expected_output', document.getElementById('testFunction').value);
                    break;
                }

                // only one radio can be logically checked, don't check the rest
                break;
            }
        }
        var data = testFunction();
        if (count % 200 == 0){
          n.animate('canvas',data.input,data.output);
          document.getElementById('log').innerText += '\nError %: ' + error;
          count = 0;
        }
        else{
          error = n.train(testFunction, 1000);
        }
        if (cont){
          requestAnimationFrame(anim);
        }
        else{
          //stopping animation
          document.getElementById('start').disabled = false;
          document.getElementById('stop').disabled = true;
        }
        count++;
      }

      function query(){
        var result = n.query(JSON.parse(document.getElementById("queryValue").value));
        document.getElementById('queryResult').innerText = result.result;
        console.log(result);
      }

      function createNewNet(){
        var input = parseInt(document.getElementById('input').value);
        var hidden = JSON.parse(document.getElementById('hidden').value);
        var output = parseInt(document.getElementById('output').value);
        n = new Neurotic(input, hidden, output);
      }
    </script>
  </head>
  <body>
    <canvas id="canvas" style="width:1500px; height:500px;" width="1500" height="500"></canvas><br>
    Net Attributes:<br>
    Input Size: <input id="input" value="8"><br>
    Hidden Layers: <input id="hidden" value="[8]"><br>
    Output Size: <input id="output" value="8"><br>
    <button type="button" onclick="createNewNet()">Create New Net</button><hr>
    Test Function (must return map of format {input: [0,0,...,0], output: [0,0,...,0]})<br>
    <input type="radio" name="test" value="sine" checked>Sine</input>
    <input type="radio" name="test" value="sum">Sum</input>
    <input type="radio" name="test" value="difference">Difference</input>
    <input type="radio" name="test" value="iris">Iris</input>
    <input type="radio" name="test" value="xor">XOR</input>
    <input type="radio" name="test" value="fish">Fish</input>
    <input type="radio" name="test" value="wine">Wine</input>
    <input type="radio" name="test" value="custom">Custom</input><br>
    <textarea id="testFunction" rows="8" cols="80">var aVal = Math.random()*3.14;
var resultVal = Math.sin(aVal);
var a = [aVal];
var result = [resultVal];
return {input: a, output: result, outputVal: resultVal};</textarea><br>
    Evaluation function (use the variables result and expected_output, which are both arrays and the returned values of the test function)<br>
    This is optional, but if inputted, must return a positive value<br>
    <textarea id="evalFunction" rows="8" cols="80"></textarea><br>
    <button type="button" id="start" onclick="cont=true; anim();">start</button>
    <button type="button" id="stop" disabled=true onclick="cont=false;">stop</button><br>
    Log: <br><pre id="log"></pre><hr>
    Query string (must be an array in JSON parseable format)
    <input id="queryValue" value="[10,10,10,10,0,0,0,0]">
    <button type="button" id="query" onclick="query();">Query</button><br>
    Result: <pre id="queryResult"></pre>
  </body>
</html>

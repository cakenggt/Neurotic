<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="neurotic.js" charset="utf-8"></script>
    <script type="text/javascript">
      var n = new Neurotic(16,[32],512);
      var cont = true;
      var count = 0;
      var average = 0;
      var averageSq = 0;
      function anim(){
        var aVal = Math.floor(Math.random()*255);
        var bVal = Math.floor(Math.random()*255);
        var resultVal = aVal+bVal;
        a = aVal.toString(2).split('');
        b = bVal.toString(2).split('');
        result = [];
        for (var x = 0; x < 512; x++){
          if (x < aVal+bVal){
            result[x] = 1;
          }
          else{
            result[x] = 0;
          }
        }
        while (a.length < 8){
          a.unshift(0);
        }
        while (b.length < 8){
          b.unshift(0);
        }
        var query = a.concat(b);
        if (count % 200 == 0){
          n.animate('canvas',query,result);
          document.getElementById('log').innerText += '\nAverage: ' + (average/200) + ' AverageSq: ' + (averageSq/200);
          average = 0;
          averageSq = 0;
          count = 0;
        }
        else{
          var results = n.query(query,result);
          average += results.correct;
          var sum = 0;
          for (var x = 0; x < 512; x++){
            if (results.result[x] == 1){
              sum ++;
            }
          }
          averageSq += Math.pow(sum - (aVal+bVal), 2);
        }
        if (cont){
          requestAnimationFrame(anim);
        }
        count++;
      }
    </script>
  </head>
  <body>
    <canvas id="canvas" style="width:100%; height:100%;"></canvas>
    <button type="button" name="button" onclick="cont=true; anim();">start</button>
    <button type="button" name="button" onclick="cont=false;">stop</button>
    <pre id="log"></pre>
  </body>
</html>
